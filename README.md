# Pixel City Builder

**Pixel City Builder** — браузерная игра в жанре градостроительного симулятора с пиксельной графикой, изометрическим видом и элементами idle-механик.

---

## Описание проекта

Игрок строит и развивает город на процедурно сгенерированной карте: размещает здания, улучшает их, собирает ресурсы и повышает уровень поселения. Есть система престижа для повторного прохождения и условия победы. Игра сохраняется в браузере (несколько слотов), поддерживается офлайн-прогресс.

**Ключевые особенности:**
- **Изометрический вид (2.5D)** — здания рисуются с учётом глубины и перекрытий
- **Процедурная карта 64×64** — вода, песок, трава, холмы, лес, скалы в виде острова
- **Влияние местности** — множители стоимости постройки и бонусы к производству
- **Дороги и инфраструктура** — здания эффективнее при подключении к дорогам; электростанции и водонапорные башни работают в радиусе
- **Цикл день/ночь** — смена освещения и подсветка окон
- **События** — караваны, фестивали, бури, гранты, засуха с выбором «принять / отклонить»
- **Звук** — процедурные эффекты через Web Audio API (строительство, снос, улучшение и т.д.)
- **Туториал** — пошаговое обучение для новичков
- **Статистика** — график населения, счастья и монет в реальном времени
- **Миникарта** и **три слота сохранений** с информацией о каждом слоте

---

## Как запустить

1. Установите зависимости (при необходимости): в проекте используются только ES-модули, внешние зависимости не требуются.
2. Запустите локальный сервер в корне проекта:
   ```bash
   npm start
   ```
   Или любой другой статический HTTP-сервер (например, `npx serve .`), чтобы корректно подгружались модули из `src/`.
3. Откройте в браузере адрес сервера (обычно `http://localhost:3000` или указанный в выводе).

---

## Управление

| Действие | Управление |
|--------|------------|
| Движение камеры | **WASD** или **стрелки** |
| Зум | **Колёсико мыши** |
| Панорама | **Shift + перетаскивание** или **средняя кнопка мыши** |
| Построить / Выбрать | **ЛКМ** по клетке |
| Снести | **ПКМ** или кнопка **Bulldoze (B)** |
| Быстрый выбор инструмента | **1–9** |
| Улучшить | **U** |
| Починить | **R** |
| Дерево улучшений | **O** (или кнопка Tree) |
| Полный экран | **F** |
| Звук вкл/выкл | **M** |
| Престиж | **P** |

На мобильных устройствах поддерживаются жесты: перетаскивание для панорамы и pinch для зума.

---

## Игровая механика

- **Уровни города (1–7):** от «Settlement» до «Futuristic City». Повышение уровня открывает новые типы зданий и даёт бонусы к производству.
- **Ресурсы:** дерево, камень, еда, монеты, доски, кирпичи, инструменты, ткань, металл, стекло, энергия, наука, культура, слава, вода.
- **Здания:** жилые, производственные, коммерческие, культурные, инфраструктурные (дороги, склады, электростанции, водонапорные башни) и продвинутые (исследования, чудеса). У каждого здания несколько стадий улучшения с разными эффектами и синергиями.
- **Престиж:** после достижения 7-го уровня можно сделать престиж и получить звёзды престижа, дающие постоянные бонусы к производству и счастью в следующих прохождениях.
- **Условия победы:** достичь 7-го уровня, сделать престиж хотя бы раз, набрать 3 звезды престижа и 1000 славы.

---

## Технологии

- **HTML5**, **CSS3**, **JavaScript (ES modules)**
- **Canvas 2D** для отрисовки мира и интерфейса
- **Web Audio API** для звуковых эффектов
- Без фреймворков и сборщиков — только статический сервер и модули

---

## Структура проекта

```
├── index.html          # Точка входа, разметка UI
├── style.css           # Стили панелей, модалок, кнопок
├── game.js             # [Legacy] Оригинальная однопоточная версия (v1)
├── src/
│   ├── main.js         # Точка входа, UI, ввод, игровой цикл
│   ├── config.js       # Здания, ресурсы, уровни города, события, рельеф
│   ├── state.js        # Игровое состояние (сетка, ресурсы, камера)
│   ├── economy.js      # Ресурсы, производство, синергии, дороги
│   ├── progression.js  # Уровни, престиж, улучшения, тик симуляции
│   ├── mapgen.js       # Процедурная генерация рельефа
│   ├── renderer.js     # Изометрическая отрисовка и миникарта
│   ├── events.js       # Случайные события города
│   ├── save.js         # Многослотовые сохранения и офлайн-прогресс
│   ├── sound.js        # Звуковые эффекты
│   └── tutorial.js     # Система туториала
├── package.json
├── progress.md         # История версий и планов
└── README.md           # Этот файл
```

---

## Лицензия

ISC
